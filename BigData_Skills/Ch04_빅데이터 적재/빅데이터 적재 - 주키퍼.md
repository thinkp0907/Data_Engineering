# 빅데이터 적재

## 빅데이터 적재에 활용하는 기술

### 주키퍼

빅데이터 분산 환경을 더욱 효율적으로 관리하기 위해서는 서버 간의 정보를 쉽고 안전하게 공유해야 한다. 공유된 정보를 이용해 서버 간의 중요한 이벤트를 관리하면서 상호작용을 조율해 주는 코디네이터 시스템이 필요한데, 이것이 바로 분산 코디네이터인 아파치 주키퍼다

| 주요 구성 요송  | 설명                                                         |
| --------------- | ------------------------------------------------------------ |
| Client          | 주키퍼의 ZNode에 담긴 데이터에 대한 쓰기, 읽기, 삭제 등의 작업을 요청하는 클라이언트 |
| ZNode           | 주키퍼 서버에 생성되는 파일시스템의 디렉터리 개념으로, 클라이언트의 요청 정보를 계층적으로 관리 |
| Ensemble        | 3대 이상의 주키퍼 서버를 하나의 클러스터로 구성한 HA 아키텍처 |
| Leader Server   | Ensemble 안에는 유일한 리더 서버가 선출되어 존재하며, 클라이언트의 요청을 받은 서버는 해당 요청을 리더 서버에 전달하고, 리더 서버는 모든 팔로워 서버에게 클라이언트 요청이 전달되도록 보장 |
| Follower Server | Ensemble 안에서 한 대의 리더 서버를 제외한 나머지 서버로서, 리더 서버와 메시지를 주고받으면서 ZNode의 데이터를 동기화하고 리더 서버에 문제가 발생할 경우 내부적으로 새로운 리더를 선출하는 역할을 수행 |



---

### 주키퍼 아키텍처

- 주키퍼는 3대 이상의 홀수 개의 서버로 구성돼야 한다.
- 반드시 1대는 리더 서버가 되고 나머지 서버는 팔로워 서버가 된다
- 팔로워 서버 1에 저장된 ZNode 정보는 리더 서버에 전달되고, 리더 서버는 다른 모든 팔로워 서버에 요청받은 ZNode 정보를 브로드캐스트한다.

![image-20210415180246556](https://github.com/thinkp0907/Data_Engineering/blob/main/BigData_Skills/img/%EC%A3%BC%ED%82%A4%ED%8D%BC%20%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.PNG)



#### 주키퍼 활용 방안

하둡, HBase, 카프카, 스톰의 내부에서 주키퍼에 의존해 클러스터 멤버십 기능 및 환경설정의 동기화 등을 사용하고 있어 없어서는 안 될 중요 소프트웨어다.

