# 빅데이터 파일럿 프로젝트

## 스마트카

### 요구사항

- 요구사항 1: 차량의 다양한 장치로부터 발생하는 로그 파일을 수집해서 기능별 상태를 점검
- 요구사항 2: 운전자의 운행 정보가 담긴 로그를 실시간으로 수집해서 주행 패턴 분석



### 데이터셋

스마트카에서 발생하는 기본 데이터셋은 총 4가지 유형

|            **유형**             |                             설명                             | 관련 요구사항 |           생성방법           |
| :-----------------------------: | :----------------------------------------------------------: | :-----------: | :--------------------------: |
|   스마트카 상태 정보 데이터셋   | 스마트카의 각종 센서로부터 발생하는 차량의 상태 정보 데이터셋 |   요구사항1   | 로그 시뮬레이터를 통해 생성  |
|  스마트카 운전자 운행 데이터셋  |    스마트카 운전자의 운전 패턴/운행 정보가 담긴 데이터셋     |  요구사항 2   | 로그 시뮬레이터를 통해 생성  |
|    스마트카 마스터 데이터셋     |       스마트카 운전자의 프로파일 정보가 담긴 테이터셋        |  요구사항1,2  | 이미 만들어진 샘플 파일 이용 |
| 스마트카 물품구매 이력 데이터셋 | 스마트카 운전자가 차량 내의 스마트 스크린을 통해 쇼핑몰에서 구입한 차량 물품 구매 목록 데이터셋 |  요구사항1,2  | 이미 만들어진 샘풀 파일 이용 |



## 빅데이터 파일럿 아키텍처 이해

### 소프트웨어 아키텍처

![image-20210402181412014](https://github.com/thinkp0907/Data_Engineering/blob/main/BigData_Skills/img/image-20210402181412014.png)

**[파일럿 프로젝트의 소프트웨어 구성도]**

- 소프트웨어 아키텍처에 표기된 메인 오픈소스 소프트웨어만 17종
- 8장의 분석 확장 영역의 소프트웨어(R, 텐서플로, 플라스크)까지 포함하면 총 20종
- 각 오픈소스 프로젝트는 크게 수집, 적재, 처리 및 탐색, 분석 및 응용 영역으로 분류



위 그림의 아키텍처는 이미 많은 빅데이터 시스템에 활용되고 있는 소프트웨어 아키텍처로 크게 2개의 영역으로 나눠서 설명할 수 있다.

![image-20210402181937429](https://github.com/thinkp0907/Data_Engineering/blob/main/BigData_Skills/img/image-20210402181937429.png)

**[빅데이터 아키텍처 레이어]**



#### 수집 레이어

- 앞선 요구사항 1, 2로부터 차량의 로그를 수집하기 위해 **Flume**을 사용하고, 요구사항 2의 실시간 로그 이벤트를 처리하기 위해 **스톰**이 사용된다. 이때 플럼과 스톰 사이의 **카프카**는 데이터의 안정적인 수집을 위해 버퍼링 및 트랜잭션 처리를 담당한다.

#### 적재 레이어

- 적재 대상은 **하둡**과 **HBase**, **레디스**다.
- 요구사항 1의 대용량 로그 파일은 수집과 동시에 플럼 -> 하둡으로 적재된다
- 요구사항 2의 실시간 데이터는 플럼-> 카프카-> 스톰-> HBase/레디스로 적재된다
- 이때 스톰을 통해 실시간 이벤트 분석을 수행하고, 분석된 결과에 따라 HBase와 레디스로 나누어 적재

#### 처리/탐색 레이어

- 하둡에 적재된 데이터는 **하이브**를 이용해 정제/변형/통합/분리 등의 작업을 수행하고, 데이터를 정형화된 구조로 정규화해 데이터 마트를 만든다.
- 가공/분석된 데이터를 외부로 제공하기 위해 **스쿱**을 이용하며, 필요 시 분석/응용 단계에서도 사용한다.
- **우지**의 워크플로로 프로세스를 구성해 복잡도를 낮추고 자동화한다.

#### 분석/응용 레이어

- 처리/탐색을 통해 데이터가 정규화됐고 더 나아가 데이터 마트가 만들어졌다.
- 요구사항 1,2에 해당하는 스마트카의 상태 점검과 운전자의 운행 패턴을 빠르게 분석하기 위해 **임플라**또는 **제플린**을 이용
- **머하웃**과 **스파크ML**로 스마트카 데이터 분석을 위해 군집, 분류/예측, 추천 등을 진행 (데이터 마이닝)
- **R**로 통계분석을 진행하고, **tensorflow**로 딥러닝 모델을 만들어 플라스크로 서비스 API까지 제공해 본다.





### 하드웨어 아키텍쳐

빅데이터의 하드웨어 아키텍처는 3V 관점에서 구성한다. 이때 서버, 네트워크, 디스크, 랙 등을 3V 관점에서 면밀히 검토해서 설계하고 규모를 산정해야 한다.

| 3V              | 하드웨어 아키텍처 수립             |
| --------------- | ---------------------------------- |
| Volume(크기)    | 얼마나 많은 데이터가 발생하는가?   |
| Velocity(속도)  | 얼마나 자주 데이터가 발생하는가?   |
| Variety(다양성) | 얼마나 다양한 데이터가 발생하는가? |



#### 컴퓨터 사양

| 파일럿 환경 | CPU           | 메모리               | 디스크              | 비고             |
| ----------- | ------------- | -------------------- | ------------------- | ---------------- |
| 저사양 PC   | 듀얼코어 이상 | 8GB 이상(여유 7GB)   | 90GB 이상 여유공간  | 디스크: SSD 권장 |
| 고사양 PC   | i5 이상       | 16GB 이상(여유 15GB) | 120GB 이상 여유공간 | 디스크: SSD 권장 |

*본인은 데스크탑을 활용할 것이기에 고사양 PC 사용

